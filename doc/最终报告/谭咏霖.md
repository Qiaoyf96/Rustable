谭咏霖 2015011491

#### 大實驗中的角色

Coder,

在實驗中，相對於隊友，我 debug 的工作做得少一些，coding 的工作做得多一些。除去前期復現的階段，後期 debug 的話主要調內存的 bug，因為這部分主要是自己實現的。

對於具體代碼的分工，我們的 os 主要分成內存和進程兩大塊，我主要負責了內存部份代碼的編寫，而對於用戶進程管理這部分，因為與內存和進程的關係都很緊密，需要和隊友一起協作。

#### 自己的詳細貢獻

- bootloader 實現
  - 初始化頁表 
    - `vm_init`
    - ``boot_map_segment`

- 文件系統整體實現

  - FAT32 文件系統
  - 內存設備讀取的接口和 Cache 實現

- Shell 實現

  實現了 FAT32 文件系統和 shell 後，使文件系統能和存儲設備交互。

- 內存

  在沒有任何頁級管理的框架之上，實現了對物理內存頁級管理和虛擬內存管理

  - 物理內存管理
    - 探測物理內存 ATAG 模塊
    - 物理內存管理結構體 Pmm 和頁級管理初始化函數 `page_init`
    - 頁級物理內存管理結構體 Allocator
      - 管理空閒頁函數 `init_memmap`
      - 分配頁 `alloc`
      - 釋放頁 `dealloc`
      - 按指定虛擬地址分配虛擬頁 `alloc_at`
  - 虛擬內存管理
    - `get_pte`：虛擬地址到物理地址的轉換
    - `page_insert`：把頁插入頁表 
    - `page_remove`：把 `pte` 對應的頁釋放掉。
    - `pgdir_alloc_page`：分配頁並插入到給定頁表。
    - `user_pgdir_alloc_page` ：為用戶分配虛擬頁和物理頁，並插入到用戶的頁表。

- 用户进程管理
  - 用戶進程初始化和可執行文件的解析
    - `load_icode`
  - 内存管理
    - `clear_page`：清理用戶進程所用的空間
    - `copy_page`：把源進程的頁的數據拷貝到目標進程的頁中，同時為目標進程分配頁和填寫頁表。